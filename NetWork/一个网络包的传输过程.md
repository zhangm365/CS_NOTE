# 一个网络包的传输过程

## 1. `HTTP & DNS`

用户输入一个域名地址，然后发起一个 `HTTP` 请求，`DNS` 服务器会将域名解析为目标服务器对应的 `IP` 地址。

## 2. `TCP`

`TCP` 协议提供面向连接的、可靠的、基于字节流的传输服务。`TCP` 在传输数据之前，先通过三次握手建立可靠的连接通道。
如果 `HTTP` 报文数据的长度太长，超过了 `MSS` 的长度，这时 `TCP` 就需要把 `HTTP` 报文分割成一段一段的数据发送，而不是一次性全部发送。
![](E:\CS_NOTE_SELF\CS_NOTE\NetWork\pics\netpack_1.png)

`MTU` ：一个网络包的最大长度，以太网中一般是 `1500` 字节；
`MSS` ：除去 `IP` 和 `TCP` 头部后，一个网络包能容纳的 `TCP` 数据的最大长度。

`TCP` 会把数据按以 `MSS` 的长度为单位进行拆分，拆分出的每块数据包都会被独立发送，即每块数据包加上 `TCP` 头部后，然后交给 `IP` 层来发送数据。

## 3. `IP`

在 `IP` 数据包中填写源 `IP` 地址和目标 `IP` 地址

## 4. `MAC` 

在 `MAC` 包里需要发送方的 `MAC` 地址和接收方的 `MAC` 地址。`ARP` 协议会根据目标 `IP` 地址解析出对应的 `MAC` 地址。

## 5. 网卡

将生成的数据包的数字信号转为电信号，在物理网线上进行传输。

## 6. 交换机

交换机属于二层网络设备，交换机中含有一张 `MAC` 地址表，是设备的 `MAC` 地址和该设备对应于哪个端口的映射表。