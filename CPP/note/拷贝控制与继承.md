

# 继承中的构造函数与拷贝控制

## 1. 虚析构函数

在含有继承的类层次结构中，基类的析构函数一定要声明为 **虚析构函数**。声明方法是在析构函数最前面加关键字 `virtual` 。
这样，在 `delete` 一个动态内存分配的对象时，虚析构函数将进行动态绑定，保证运行正确的析构函数版本。

```cpp
Quote *p = new Quote;
delete p;	// 运行 Quote 的析构函数

p = new Bulk_quote;
delete p;	// 运行 Bulk_quote 的析构函数
```

更重要的一点是：对象的销毁顺序正好和其创建的顺序相反。派生类的析构函数先执行，然后是基类的析构函数，即沿着继承体系的反方向直至最后。

## 2. 合成拷贝控制与继承

基类或派生类的合成拷贝控制成员负责对类本身的成员进行初始化、赋值或销毁操作。
因此，派生类中的这些合成控制成员使用直接基类中对应的操作对一个对象的直接基类部分进行初始化、赋值或销毁操作。
例如，合成的 `Bulk_quote` 默认的构造函数运行 `Disc_quote` 的默认构造函数，而 `Disc_quote` 又运行 `Quote` 的默认构造函数。
合成的拷贝构造、赋值版本都是相同的调用过程。



