# volatile关键字

1. volatile是一种类型修饰符，用它声明的类型变量表示可能被某些编译器未知的因素所改变，比如操作系统、硬件、或其他线程等。故用volatile关键字声明的变量，指示编译器对该变量的访问代码就不再进行优化。

    例如下面实例代码：

    用volatile关键字修饰变量i，表示变量i的值可能随时由程序之外的因素所更改，每次读取i的值必须从它的内存地址中获取。因此，编译器对此变量的访问不再进行优化，编译器生成的汇编代码每次会重新在变量i的地址中读取i的值更新到b中。而不加volatile修饰符的优化方法，编译器发现在此代码段中并未对i的值进行更改，故编译器会自动把上次存在寄存器中i的值赋值给b中，不是重新到i的内存地址中读取，这样可能不是我们所想要的结果从而导致一些错误。

    因此，volatile关键字可以保证对特殊地址的稳定访问。

```c
volatile int i = 10;

int a = i;

//其他代码, 对i的值进行更改, 且并未明确告诉编译器
int b = i;

```

2.  一般情况下，volatile的几个使用场景：

-   中断服务程序中修改的变量值用于在其他程序检测的变量；
-   多线程之间共享的数据变量；
-   存储器映射的硬件寄存器等。



