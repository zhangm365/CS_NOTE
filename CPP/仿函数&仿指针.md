# 仿指针与仿函数

- [仿指针与仿函数](#仿指针与仿函数)
  - [1. 仿指针](#1-仿指针)
  - [2. 仿函数](#2-仿函数)

## 1. 仿指针

1. 使用模板类去实现指针的作用，使得指针拥有更多的功能。C++中的智能指针就是这样的实现原理。

2. 实现代码 pointer-like class

    ```c++
    template <class T>
    class Shared_ptr {
        public:
            T& operator*() const
            {
                return *px;
            }
            T* operator->() const
            {
                return px;
            }
            Shared_ptr(T* p) : px(p){}
            ~Shared_ptr(){ delete px; } //释放指针, 防止内存泄露
        
        private:
            T* px;
    };
    ```

## 2. 仿函数

1. 仿函数也是通过模板类实现其函数对应的功能。

    在类中重载 `operator()` 函数，然后通过类创建对象的方法，可以创建一个函数对象。

2. 实现代码 function-like class

    ```c++
    template <class T>
    struct identity {
        // 重载operator()
        const T& operator() (const T& x) const {
            return x;
        }
    };

    identity<int>(); // 创建一个临时函数对象

    ```
