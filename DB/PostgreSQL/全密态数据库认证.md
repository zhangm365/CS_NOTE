
# 全密态数据库认证

## 1. 数据表迁移

```sql
-- 明文表
CREATE TABLE t1 (
    id serial primary key,
    username varchar(64),
    number int 
);

-- 插入10w行数据
INSERT INTO t1 (username, number) SELECT 'username_' || generate_series(1, 100000), generate_series(1, 100000);

-- 加密表
CREATE TABLE e1 (
    id int,
    username varchar(64),
    number int ENCRYPTED WITH (COLUMN_ENCRYPTION_KEY = cek_1)
);

-- 迁移明文数据
pg_dump -d bigmath -t t1 --inserts > t1.sql
```
